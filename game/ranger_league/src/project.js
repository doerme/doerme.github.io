window.__require=function t(o,e,n){function i(r,a){if(!e[r]){if(!o[r]){var s=r.split("/");if(s=s[s.length-1],!o[s]){var d="function"==typeof __require&&__require;if(!a&&d)return d(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+r+"'")}}var p=e[r]={exports:{}};o[r][0].call(p.exports,function(t){return i(o[r][1][t]||t)},p,p.exports,t,o,e,n)}return e[r].exports}for(var c="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({arrow:[function(t,o,e){"use strict";cc._RF.push(o,"047abYiQHpO9bP6QwVs+f1X","arrow"),Object.defineProperty(e,"__esModule",{value:!0});var n=t("../config"),i=cc._decorator,c=i.ccclass,r=i.property,a=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.arrowXSpeed=1e3,o.arrowYSpeed=0,o.arrowYSpeedA=-n.Gravity,o.anchorAdd=30,o}return __extends(o,t),o.prototype.start=function(){},o.prototype._arrowRun=function(t){this.arrowYSpeed+=this.arrowYSpeedA*t,this.node.x+=this.arrowXSpeed*t,this.node.y+=this.arrowYSpeed*t,this.node.rotation+=this.anchorAdd*t},o.prototype.update=function(t){this._arrowRun(t)},o.prototype.onCollisionEnter=function(){console.log("arrow on collision enter"),this.node.removeFromParent()},__decorate([r({displayName:"x\u8f74\u901f\u5ea6"})],o.prototype,"arrowXSpeed",void 0),__decorate([r({displayName:"y\u8f74\u901f\u5ea6"})],o.prototype,"arrowYSpeed",void 0),__decorate([r({displayName:"y\u8f74\u52a0\u901f\u5ea6"})],o.prototype,"arrowYSpeedA",void 0),__decorate([r({displayName:"\u89d2\u5ea6\u589e\u91cf"})],o.prototype,"anchorAdd",void 0),o=__decorate([c],o)}(cc.Component);e.default=a,cc._RF.pop()},{"../config":"config"}],config:[function(t,o,e){"use strict";cc._RF.push(o,"d2161PyS65Cb6q/1miKs9nV","config"),Object.defineProperty(e,"__esModule",{value:!0}),e.IS_DEBUG=!0,e.GROUND_SPEED=100,e.Gravity=500,cc._RF.pop()},{}],game:[function(t,o,e){"use strict";cc._RF.push(o,"a3058CKdy9DJ4lro1zm0NKG","game"),Object.defineProperty(e,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,c=n.property,r=t("./config"),a=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.bowPreFab=null,o.groundWrap=null,o.arrowWrap=null,o.groundPreFab=null,o.man=null,o.arrowPreFab=null,o.groundArray=[],o.groundSpeed=r.GROUND_SPEED,o}return __extends(o,t),o.prototype.onLoad=function(){console.log("game onload")},o.prototype.start=function(){console.log("game start ",this.node,this.groundPreFab);var t=cc.director.getCollisionManager();t.enabled=!0,r.IS_DEBUG&&(t.enabledDebugDraw=!0),this._drawGround()},o.prototype.addArrow=function(t,o,e){void 0===t&&(t=0),void 0===o&&(o=1e3),void 0===e&&(e=0),console.log("addArrow");var n=cc.instantiate(this.arrowPreFab);n.setPosition(this.man.x,this.man.y+20),n.getComponent("arrow").arrowYSpeed=t,n.getComponent("arrow").arrowXSpeed=o,n.getComponent("arrow").node.rotation=e,this.arrowWrap.addChild(n)},o.prototype._drawGround=function(){for(var t=-this.node.width;t<this.node.width;t+=this.groundPreFab.data.width){var o=cc.instantiate(this.groundPreFab);o.x=t,o.y=-120,this.groundWrap.addChild(o),this.groundArray.push(o)}},o.prototype._updateGround=function(t){var o=this,e=t*this.groundSpeed;this.groundArray.forEach(function(t,n){t.x-=e,t.x<-o.node.width&&(t.x=o.node.width+(-o.node.width-t.x))})},o.prototype.update=function(t){this._updateGround(t)},o.prototype.onCollisionEnter=function(){console.log("game on collision enter")},o.prototype.onCollisionStay=function(){console.log("game collision stay")},o.prototype.onCollisionExit=function(){console.log("game on collision exit")},__decorate([c({type:cc.Prefab})],o.prototype,"bowPreFab",void 0),__decorate([c({type:cc.Node})],o.prototype,"groundWrap",void 0),__decorate([c({type:cc.Node})],o.prototype,"arrowWrap",void 0),__decorate([c({type:cc.Prefab})],o.prototype,"groundPreFab",void 0),__decorate([c({type:cc.Node})],o.prototype,"man",void 0),__decorate([c({type:cc.Prefab})],o.prototype,"arrowPreFab",void 0),o=__decorate([i],o)}(cc.Component);e.default=a,cc._RF.pop()},{"./config":"config"}],ground:[function(t,o,e){"use strict";cc._RF.push(o,"31ad26AgdtHGKW9sodkv6az","ground"),Object.defineProperty(e,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,c=n.property,r=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.label=null,o.text="hello",o}return __extends(o,t),o.prototype.start=function(){},__decorate([c(cc.Label)],o.prototype,"label",void 0),__decorate([c],o.prototype,"text",void 0),o=__decorate([i],o)}(cc.Component);e.default=r,cc._RF.pop()},{}],man:[function(t,o,e){"use strict";cc._RF.push(o,"1dac1DpJXFIGrSyEOrV9kur","man"),Object.defineProperty(e,"__esModule",{value:!0});var n=t("../config"),i=cc._decorator,c=i.ccclass,r=(i.property,function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.manYSpeed=0,o.manYAcceleration=-n.Gravity,o}return __extends(o,t),o.prototype.start=function(){},o.prototype.update=function(t){this._updateMan(t)},o.prototype.jump=function(){this.manYSpeed=300},o.prototype._updateMan=function(t){this.manYSpeed+=t*this.manYAcceleration,this.node.y+=t*this.manYSpeed+.5*this.manYAcceleration*t*t},o.prototype.onCollisionEnter=function(t,o){this.manYAcceleration=0,this.manYSpeed=0,this.node.y=t.node.y+o.node.height/2},o.prototype.onCollisionStay=function(){},o.prototype.onCollisionExit=function(){this.manYAcceleration=-200},o=__decorate([c],o)}(cc.Component));e.default=r,cc._RF.pop()},{"../config":"config"}],stick_bg:[function(t,o,e){"use strict";cc._RF.push(o,"58138Pgr9hCdZnuG0b5KCnG","stick_bg"),Object.defineProperty(e,"__esModule",{value:!0});var n=t("./stitck_common"),i=cc._decorator,c=i.ccclass,r=i.property,a=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.speedValueShow=null,o.rotateValueShow=null,o.dot=null,o.joyCom=null,o.playerNode=null,o._angle=null,o._radian=null,o._speed=0,o._maxSpeed=100,o._opacity=0,o}return __extends(o,t),o.prototype.onLoad=function(){this.joyCom=this.node.parent.getComponent("stick_game"),console.log("_playerNode",this.playerNode,this._angle),console.log("angle",this._angle),this.joyCom.touchType==n.default.TouchType.DEFAULT&&this._initTouchEvent()},o.prototype.start=function(){},o.prototype.update=function(t){switch(this.joyCom.directionType){case n.default.DirectionType.ALL:this._allDirectionsMove()}},o.prototype._initTouchEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},o.prototype._allDirectionsMove=function(){this.playerNode.x+=Math.cos(this._angle*(Math.PI/180))*this._speed,this.playerNode.y+=Math.sin(this._angle*(Math.PI/180))*this._speed},o.prototype._getDistance=function(t,o){return Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))},o.prototype._getRadian=function(t){return this._radian=Math.PI/180*this._getAngle(t),this._radian},o.prototype._getAngle=function(t){var o=this.node.getPosition();return this._angle=Math.atan2(t.y-o.y,t.x-o.x)*(180/Math.PI),this.rotateValueShow.getComponent(cc.Label).string=this._angle.toFixed(2).toString(),this._angle},o.prototype._setSpeed=function(t){var o=this._getDistance(t,this.node.getPosition());this._speed=o/this._maxSpeed,this.speedValueShow.getComponent(cc.Label).string=this._speed.toFixed(2).toString()},o.prototype._touchStartEvent=function(t){var o=this.node.convertToNodeSpaceAR(t.getLocation()),e=this._getDistance(o,cc.v2(0,0)),n=this.node.width/2,i=this.node.getPosition().x+o.x,c=this.node.getPosition().y+o.y;return n>e&&(this.dot.setPosition(cc.v2(i,c)),!0)},o.prototype._touchMoveEvent=function(t){var o=this.node.convertToNodeSpaceAR(t.getLocation()),e=this._getDistance(o,cc.v2(0,0)),n=this.node.width/2,i=this.node.getPosition().x+o.x,c=this.node.getPosition().y+o.y;if(n>e)this.dot.setPosition(cc.v2(i,c));else{var r=this.node.getPosition().x+Math.cos(this._getRadian(cc.v2(i,c)))*n,a=this.node.getPosition().y+Math.sin(this._getRadian(cc.v2(i,c)))*n;this.dot.setPosition(cc.v2(r,a))}this._getAngle(cc.v2(i,c)),this._setSpeed(cc.v2(i,c))},o.prototype._touchEndEvent=function(){var t=this.node.parent.parent.parent;console.log("_touchEndEvent stick_bg",this._speed,this._radian,this._angle),this.dot.setPosition(this.node.getPosition()),t.getComponent("game").addArrow(3*this._angle,1e3*this._speed,1*-this._angle/4),this._speed=0},__decorate([r({type:cc.Node,displayName:"\u901f\u5ea6"})],o.prototype,"speedValueShow",void 0),__decorate([r({type:cc.Node,displayName:"\u89d2\u5ea6"})],o.prototype,"rotateValueShow",void 0),__decorate([r({type:cc.Node,displayName:"\u6447\u6746\u8282\u70b9"})],o.prototype,"dot",void 0),__decorate([r({displayName:"joy Node"})],o.prototype,"joyCom",void 0),__decorate([r({type:cc.Node,displayName:"\u88ab\u64cd\u4f5c\u7684\u76ee\u6807Node"})],o.prototype,"playerNode",void 0),__decorate([r({displayName:"\u5f53\u524d\u89e6\u6478\u7684\u89d2\u5ea6"})],o.prototype,"_angle",void 0),__decorate([r({displayName:"\u5f27\u5ea6"})],o.prototype,"_radian",void 0),o=__decorate([c],o)}(cc.Component);e.default=a,cc._RF.pop()},{"./stitck_common":"stitck_common"}],stick_game:[function(t,o,e){"use strict";cc._RF.push(o,"11352tMoEZBzYixtzGe4kl5","stick_game"),Object.defineProperty(e,"__esModule",{value:!0});var n=t("./stick_bg"),i=t("./stitck_common"),c=cc._decorator,r=c.ccclass,a=c.property,s=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.dot=null,o.ring=null,o.stickX=0,o.stickY=0,o.touchType=i.default.TouchType.DEFAULT,o.directionType=i.default.DirectionType.ALL,o.sprite=null,o._stickPos=null,o._touchLocation=null,o}return __extends(o,t),o.prototype.onLoad=function(){this._createStickSprite(),this.touchType==i.default.TouchType.FOLLOW&&this._initTouchEvent()},o.prototype.start=function(){},o.prototype._createStickSprite=function(){this.ring.node.setPosition(this.stickX,this.stickY),this.dot.setPosition(this.stickX,this.stickY)},o.prototype._initTouchEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},o.prototype._touchStartEvent=function(t){this._touchLocation=t.getLocation();var o=this.node.convertToNodeSpaceAR(t.getLocation());this.ring.node.setPosition(o),this.dot.setPosition(o)},o.prototype._touchMoveEvent=function(t){if(this._touchLocation.x==t.getLocation().x&&this._touchLocation.y==t.getLocation().y)return!1;var o=this.ring.node.convertToNodeSpaceAR(t.getLocation()),e=this.ring._getDistance(o,cc.v2(0,0)),n=this.ring.node.width/2,i=this._stickPos.x+o.x,c=this._stickPos.y+o.y;if(n>e)this.dot.setPosition(cc.v2(i,c));else{var r=this._stickPos.x+Math.cos(this.ring._getRadian(cc.v2(i,c)))*n,a=this._stickPos.y+Math.sin(this.ring._getRadian(cc.v2(i,c)))*n;this.dot.setPosition(cc.v2(r,a))}this.ring._getAngle(cc.v2(i,c)),this.ring._setSpeed(cc.v2(i,c))},o.prototype._touchEndEvent=function(){console.log("_touchEndEvent stick_game"),this.dot.setPosition(this.ring.node.getPosition()),this.ring._speed=0},__decorate([a({type:cc.Node,displayName:"\u6447\u6746\u8282\u70b9"})],o.prototype,"dot",void 0),__decorate([a({type:n.default,displayName:"\u6447\u6746\u80cc\u666f\u8282\u70b9"})],o.prototype,"ring",void 0),__decorate([a({displayName:"\u6447\u6746X\u4f4d\u7f6e"})],o.prototype,"stickX",void 0),__decorate([a({displayName:"\u6447\u6746Y\u4f4d\u7f6e"})],o.prototype,"stickY",void 0),__decorate([a({type:i.default.TouchType,displayName:"\u89e6\u6478\u7c7b\u578b"})],o.prototype,"touchType",void 0),__decorate([a({type:i.default.DirectionType,displayName:"\u65b9\u5411\u7c7b\u578b"})],o.prototype,"directionType",void 0),__decorate([a({type:cc.Node,displayName:"\u64cd\u63a7\u7684\u76ee\u6807"})],o.prototype,"sprite",void 0),o=__decorate([r],o)}(cc.Component);e.default=s,cc._RF.pop()},{"./stick_bg":"stick_bg","./stitck_common":"stitck_common"}],stitck_common:[function(t,o,e){"use strict";cc._RF.push(o,"2d880NzFXFPSrFwIVazl3O5","stitck_common"),Object.defineProperty(e,"__esModule",{value:!0}),e.default={TouchType:cc.Enum({DEFAULT:0,FOLLOW:1}),DirectionType:cc.Enum({FOUR:4,EIGHT:8,ALL:0})},cc._RF.pop()},{}]},{},["config","game","arrow","ground","man","stick_bg","stick_game","stitck_common"]);