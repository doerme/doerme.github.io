# package.json 版本号规范


我们经常看到，在 `package.json` 中各种依赖的不同写法


```json
"dependencies": {
    "signale": "1.4.0",
    "figlet": "*",
    "react": "16.x",
    "table": "~5.4.6",
    "yargs": "^14.0.0"
  }
```

前面三个很容易理解：

+ "signale": "1.4.0": 固定版本号
+ "figlet": "*": 任意版本（>=0.0.0）
+ "react": "16.x": 匹配主要版本（>=16.0.0 <17.0.0）
+ "react": "16.3.x": 匹配主要版本和次要版本（>=16.3.0 <16.4.0）

再来看看后面两个，版本号中引用了 `~` 和 `^` 符号：


+ `~`: 当安装依赖时获取到有新版本时，安装到 `x.y.z` 中 `z` 的最新的版本。即保持主版本号、次版本号不变的情况下，保持修订号的最新版本。
+ ^: 当安装依赖时获取到有新版本时，安装到 `x.y.z` 中 `y` 和 `z` 都为最新版本。 即保持主版本号不变的情况下，保持次版本号、修订版本号为最新版本。

在 `package.json` 文件中最常见的应该是 `"yargs": "^14.0.0"` 这种格式的 依赖, 因为我们在使用 `npm install package` 安装包时，`npm` 默认安装当前最新版本，然后在所安装的版本号前加 `^` 号。

注意，当主版本号为 `0` 的情况，会被认为是一个不稳定版本，情况与上面不同：

+ 主版本号和次版本号都为 `0`: `^0.0.z、~0.0.z` 都被当作固定版本，安装依赖时均不会发生变化。
+ 主版本号为 `0`: `^0.y.z` 表现和 `~0.y.z` 相同，只保持修订号为最新版本。


> 1.0.0 的版本号用于界定公共 API。当你的软件发布到了正式环境，或者有稳定的API时，就可以发布1.0.0版本了。所以，当你决定对外部发布一个正式版本的npm包时，把它的版本标为1.0.0。







### 其他

| 格式 | 作用 |
|:------|:------|
| 1.2.3 | 指定匹配1.2.3版本 |
| ^1.2.3 | 左第一位非0位不可改变，第二位及之后可以为更高版本 |
| last | 当前发布版本，常见的还有 next stable beta canary |
| ^1.x | 匹配 >=1.0.0 且 <2.0.0 |
| 1 | 匹配 >=1.0.0 且 <2.0.0 |
| 1.2 | 匹配 >=1.2.0 且 <1.3.0 |
| ~1.2.3 | 匹配 >=1.2.0 且 <1.3.0 |
| > = < | 同字面表达意思 |
